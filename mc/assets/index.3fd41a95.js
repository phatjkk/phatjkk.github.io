var Fe=Object.defineProperty,ze=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var $e=(t,r,l)=>r in t?Fe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l,q=(t,r)=>{for(var l in r||(r={}))ke.call(r,l)&&$e(t,l,r[l]);if(J)for(var l of J(r))Ce.call(r,l)&&$e(t,l,r[l]);return t},te=(t,r)=>ze(t,qe(r));var re=(t,r)=>{var l={};for(var s in t)ke.call(t,s)&&r.indexOf(s)<0&&(l[s]=t[s]);if(t!=null&&J)for(var s of J(t))r.indexOf(s)<0&&Ce.call(t,s)&&(l[s]=t[s]);return l};import{u as U,j as a,a as e,L as g,r as d,F as x,b as We,i as G,I as Q,c as V,d as He,e as le,f as F,g as _e,h as Ke,k as Be,l as De,s as Je,m as Ge,R as se,S as ae,N as ie,n as ne,E as Qe,U as Ze,G as Xe,Q as Ye,V as Le,T as et,o as tt,y as rt,D as lt,p as Z,q as st,t as at,v as it,w as nt,x as ot,z as ct,A as j,B as dt,C as mt,H as ht}from"./vendor.e4d97aaf.js";const ut=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function l(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=l(i);fetch(i.href,n)}};ut();const P=()=>{const t=U();return a("div",{className:"flex flex-col min-h-screen justify-center items-center gap-4",children:[e("img",{className:"w-full max-w-[200px] h-auto",src:"/error.png",alt:""}),e("p",{className:"text-xl",children:"Something went wrong"}),t.pathname!=="/"&&e(g,{className:"text-primary",to:"/",children:"Return home"})]})},E=({value:t})=>(d.exports.useEffect(()=>{document.title=t},[t]),e(x,{})),$=We.create({baseURL:"https://ga-mobile-api.loklok.tv/cms/app",headers:{lang:"en",versioncode:"11",clienttype:"ios_jike_default"}}),ft=async(t,r)=>(await $.post("search/v1/search",{size:20,params:"",category:t,sort:r})).data.data.searchResults,L=(t,r="",l="")=>`https://agvmolqooq.cloudimg.io/v7/${t}?width=${r}&height=${l}`,Ie=t=>`https://srt-to-vtt.vercel.app?url=${encodeURIComponent(t)}`,W={0:{width:200,height:100},1:{width:175,height:246}},pt=({id:t,categoryName:r})=>{var c,u;const l=(m,o)=>{var h,b;return o&&o.length===0?null:`${t}-${((b=(h=o==null?void 0:o.slice(-1))==null?void 0:h[0])==null?void 0:b.sort)||""}`},{data:s,error:i,setSize:n}=G(l,m=>ft(t,m.split("-").slice(-1)[0]));return i?e(P,{}):a(x,{children:[e(E,{value:`Category ${r} - MacChill`}),e(Q,{dataLength:(s==null?void 0:s.length)||0,next:()=>n(m=>m+1),hasMore:!i&&((u=(c=s==null?void 0:s.slice(-1))==null?void 0:c[0])==null?void 0:u.length)!==0,loader:e("div",{className:"flex justify-center w-full",children:e("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent rounded-full animate-spin my-10"})}),endMessage:e("p",{className:"text-center mt-6",children:"Nothing more to see"}),children:e("div",{className:"flex justify-center mx-[7vw]",children:e("div",{className:"w-full grid grid-cols-sm md:grid-cols-lg gap-6",children:s==null?void 0:s.reduce((m,o)=>(m.push(...o),m),[]).map(m=>e(g,{title:m.name,to:m.domainType===0?`/movie/${m.id}`:`/tv/${m.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:L(m.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:m.name})})]})},m.id))})})})]})},Re=t=>{const r=new Date(0);return r.setSeconds(t),r.toISOString().substr(11,8)},gt=()=>/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent),xt=t=>{const r=document.createElement("div");return r.innerHTML=t,r.textContent},vt=t=>{let r={year:365*30*24*60*60*1e3,month:30*24*60*60*1e3,week:7*24*60*60*1e3,day:24*60*60*1e3,hour:60*60*1e3,minute:60*1e3},l=Date.now()-t;for(const s in r)if(l>=r[s]){let i=Math.floor(l/r[s]);return`${i} ${i===1?s:s+"s"} ago`}return"Just now"},bt=async t=>(await $.post("search/searchLenovo",{searchKeyWord:t,size:10})).data.data.searchResults,yt=async t=>(await $.post("search/v1/searchWithKeyWord",{searchKeyWord:t,size:50,sort:"",searchType:""})).data.data.searchResults,oe=({autoFocus:t})=>{const[r,l]=d.exports.useState(""),[s,i]=d.exports.useState([]),n=d.exports.useRef(null),c=He();return d.exports.useEffect(()=>{n.current&&clearTimeout(n.current),i([]),!!r.trim()&&(n.current=setTimeout(async()=>{const m=await bt(r.trim());i(m.map(o=>xt(o)))},500))},[r]),a("div",{className:"relative group w-full",children:[a("form",{onSubmit:m=>{m.preventDefault(),r.trim()&&c(`/search?q=${encodeURIComponent(r.trim())}`)},className:"relative",children:[e("input",{value:r,onKeyDown:m=>m.stopPropagation(),onKeyUp:m=>m.stopPropagation(),onKeyPress:m=>m.stopPropagation(),onChange:m=>l(m.target.value),className:"bg-transparent outline-none border border-gray-600 w-full rounded-full py-2 pl-4 pr-8",type:"text",placeholder:"Search...",autoFocus:t}),e("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e("i",{className:"fas fa-search text-xl"})})]}),s.length>0&&e("div",{className:"absolute z-10 top-full left-0 w-full bg-dark-lighten rounded overflow-x-hidden overflow-y-auto max-h-[200px] flex-col items-stretch hidden group-focus-within:flex",children:s.map((m,o)=>e(g,{to:`/search?q=${encodeURIComponent(m)}`,children:e("button",{className:`text-left p-2 w-full ${o!==s.length-1?"border-b border-gray-500":""}`,children:m})},o))})]})},H=()=>a("div",{className:"flex justify-between items-center my-7",children:[a(g,{to:"/",className:"flex items-center gap-2",children:[e("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),e("span",{className:"text-xl font-medium",children:"MacChill"})]}),e(g,{className:"block md:hidden",to:"/search",children:e("i",{className:"fas fa-search text-2xl"})}),e("div",{className:"max-w-[500px] hidden md:block",children:e(oe,{})})]}),Te=async()=>(await $.get("search/list")).data.data,Nt=async(t,r,l)=>(await $.post("search/v1/search",te(q({size:20,params:t},r),{sort:l}))).data.data.searchResults,wt=()=>{var i,n;const{id:t}=le(),{data:r,error:l}=F("search-config",()=>Te());if(l)return e(P,{});if(!r)return e("div",{className:"flex-grow flex justify-center items-center",children:e("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})});const s=(n=(i=r[0].screeningItems.find(c=>c.id===5))==null?void 0:i.items.find(c=>c.params===t))==null?void 0:n.name;return s?a("div",{children:[a("div",{className:"mx-[7vw]",children:[e(H,{}),a("h1",{className:"my-6 text-2xl",children:["Category: ",s]})]}),e(pt,{id:t,categoryName:s})]}):e(P,{})},ce=i=>{var n=i,{className:t,onLoad:r,crossOrigin:l}=n,s=re(n,["className","onLoad","crossOrigin"]);const[c,u]=d.exports.useState(!1);return e("img",q({className:`${c?"opacity-100":"opacity-0"} transition duration-300 ${t}`,onLoad:m=>{u(!0),r&&r(m)}},s))},je=_e(JSON.parse('{"apiKey":"AIzaSyDTZgeHg5JcgLVjO8wTkNLJQI7b46QfQxk","authDomain":"film-privite.firebaseapp.com","projectId":"film-privite","storageBucket":"film-privite.appspot.com","messagingSenderId":"416221058869","appId":"1:416221058869:web:54f93b62f1fc540b331e7c","measurementId":"G-ZHQGTS25CH"}')),de=Ke(je),me=Be(je),X=De(t=>({currentUser:void 0,setCurrentUser:r=>t({currentUser:r})})),Pe=({sidebarActive:t,setSidebarActive:r})=>{const l=U(),s=X(n=>n.currentUser),i=()=>{Je(de)};return a(x,{children:[a("div",{className:`flex-shrink-0 sm:sticky left-auto right-full sm:!right-0 sm:!left-0 fixed top-0 flex flex-col items-stretch py-10 pl-5 xl:pl-10 pr-0 w-[90vw] max-w-[288px] sm:max-w-none sm:w-16 xl:w-72 border-r border-gray-800 h-screen overflow-y-auto z-10 bg-dark sm:bg-transparent sm:!translate-x-0 transition-all duration-500 ${t?"translate-x-full":"translate-x-0"}`,children:[a(g,{to:"/",className:"flex gap-2 items-center",children:[e("img",{className:"w-6 h-6",src:"/icon.png",alt:""}),e("p",{className:"font-semibold text-xl block sm:hidden xl:block",children:"MacChill"})]}),a("div",{className:"mt-0 sm:mt-4 xl:mt-0 block sm:flex flex-col gap-0 sm:gap-4 xl:block xl:gap-0",children:[e("p",{className:"text-gray-400 uppercase mt-10 mb-4 block sm:hidden xl:block",children:"Menu"}),a("div",{className:"flex flex-col items-stretch gap-3",children:[a(g,{to:"/",className:`flex items-center gap-2 transition ${l.pathname==="/"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-home text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Home"})]}),a(g,{to:"/discovery",className:`flex items-center gap-2 transition ${l.pathname==="/discovery"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-compass text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Discovery"})]}),a(g,{to:"/explore",className:`flex items-center gap-2 transition ${l.pathname==="/explore"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-desktop text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Explore"})]}),a(g,{to:"/history",className:`flex items-center gap-2 transition ${l.pathname==="/history"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-history text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"History"})]}),a(g,{to:"/search",className:`md:!hidden flex items-center gap-2 transition ${l.pathname==="/search"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-search text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Search"})]})]}),e("p",{className:"text-gray-400 uppercase mt-10 mb-4 block sm:hidden xl:block",children:"Personal"}),s?a("div",{className:"flex flex-col items-stretch gap-3",children:[a("div",{className:"flex gap-2 items-center",children:[e("img",{className:"w-[24px] h-[24px] rounded-full",src:L(s.photoURL,"24","24"),alt:""}),e("p",{className:"text-gray-400 block sm:hidden xl:block",children:s.displayName})]}),a("button",{onClick:i,className:"flex items-center cursor-pointer gap-2 transition text-gray-400 hover:text-gray-300",children:[e("i",{className:"fas fa-sign-out-alt text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Sign Out"})]})]}):a(g,{to:`/sign-in?redirect=${encodeURIComponent(l.pathname)}`,className:"flex items-center cursor-pointer gap-2 transition text-gray-400 hover:text-gray-300",children:[e("i",{className:"fas fa-sign-in-alt text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Sign In"})]})]})]}),e("div",{onClick:()=>r(!1),className:`bg-[#00000080] z-[5] fixed top-0 left-0 w-full h-full transition-all duration-500 sm:!opacity-0 ${t?"opacity-100 visible":"opacity-0 invisible"}`})]})},St=async(t=0)=>{const r=(await $.get("recommendPool/getVideoFromRecommondPool",{params:{page:t},headers:{deviceid:Math.random().toString(36).slice(-8)}})).data.data,l=(await $.post("media/bathGetplayInfo",r.map(s=>({category:s.category,contentId:s.id,episodeId:s.mediaInfo.id,definition:s.mediaInfo.definitionList.slice(-1)[0].code})))).data.data.map(s=>s.mediaUrl);return r.map((s,i)=>te(q({},s),{mediaUrl:l[i]}))},kt=()=>{var u,m;const[t,r]=d.exports.useState(!1),l=o=>`discovery-${o||0}`,{data:s,error:i,setSize:n}=G(l,o=>St(Number(o.split("-").slice(-1)[0])),{revalidateFirstPage:!1}),c=U();return d.exports.useEffect(()=>{r(!1)},[c]),i?e(P,{}):a(x,{children:[a("div",{className:"flex sm:hidden justify-between px-[4vw] mt-6",children:[a(g,{to:"/",className:"flex items-center gap-2",children:[e("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),e("span",{className:"text-xl font-medium",children:"MacChill"})]}),e("button",{onClick:()=>r(!t),children:e("i",{className:"fas fa-bars text-2xl"})})]}),a("div",{className:"flex",children:[e(Pe,{sidebarActive:t,setSidebarActive:r}),a("div",{className:"flex-grow py-10 px-[4vw]",children:[!s&&e("div",{className:"h-screen w-full flex justify-center items-center",children:e("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})}),e(Q,{dataLength:(s==null?void 0:s.length)||0,next:()=>n(o=>o+1),hasMore:!i&&((m=(u=s==null?void 0:s.slice(-1))==null?void 0:u[0])==null?void 0:m.length)!==0,loader:e(x,{}),children:e("div",{className:"flex flex-col items-center w-full gap-24",children:s==null?void 0:s.reduce((o,h)=>[...o,...h],[]).map(o=>{var h,b,I;return a("div",{className:"w-full max-w-[600px] flex gap-2",children:[e(ce,{className:"w-12 h-12 rounded-full flex-shrink-0 bg-gray-500",src:L(o.upInfo.upImgUrl),alt:""}),a("div",{className:"flex flex-col items-stretch flex-grow gap-3",children:[e("p",{className:"font-semibold",children:((h=o.refList[0])==null?void 0:h.name)||o.name}),e("p",{children:o.introduction}),e(Ge,{threshold:.5,children:({ref:M,inView:N})=>e("div",{ref:M,className:"h-0 relative pb-[100%]",children:e(se,{controls:!0,muted:!0,autoPlay:N,src:o.mediaUrl,className:"absolute top-0 left-0 w-full h-full object-contain"})})})]}),a("div",{className:"flex flex-col items-center justify-center w-20 gap-5",children:[a("div",{className:"flex flex-col items-center gap-2",children:[e("button",{className:"bg-dark-lighten rounded-full h-10 w-10 flex justify-center items-center",children:e("i",{className:"fas fa-heart text-red-500"})}),e("span",{children:o.likeCount})]}),((I=(b=o==null?void 0:o.refList)==null?void 0:b[0])==null?void 0:I.id)&&a("div",{className:"flex flex-col items-center gap-2",children:[e(g,{to:o.refList[0].category===0?`/movie/${o.refList[0].id}`:`/tv/${o.refList[0].id}`,className:"bg-dark-lighten rounded-full h-10 w-10 flex justify-center items-center",children:e("i",{className:"fas fa-external-link-alt"})}),e("span",{children:"Open"})]})]})]},o.id)})})})]})]})]})},Ct=({params:t,configs:r,sectionIndex:l})=>{var u,m;const s=(o,h)=>{var b,I;return h&&h.length===0?null:`explore-${l}-${JSON.stringify(r)}-${((I=(b=h==null?void 0:h.slice(-1))==null?void 0:b[0])==null?void 0:I.sort)||""}`},{data:i,error:n,setSize:c}=G(s,o=>Nt(t,r,o.split("-").slice(-1)[0]),{revalidateFirstPage:!1});return n?e(P,{}):e(Q,{dataLength:(i==null?void 0:i.length)||0,next:()=>c(o=>o+1),hasMore:!n&&((m=(u=i==null?void 0:i.slice(-1))==null?void 0:u[0])==null?void 0:m.length)!==0,loader:e("div",{className:"flex justify-center w-full",children:e("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent rounded-full animate-spin my-10"})}),endMessage:e("p",{className:"text-center mt-6",children:"Nothing more to see"}),children:e("div",{className:"w-full grid grid-cols-sm md:grid-cols-lg gap-6",children:i==null?void 0:i.reduce((o,h)=>[...o,...h],[]).map(o=>e(g,{title:o.name,to:o.domainType===0?`/movie/${o.id}`:`/tv/${o.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:L(o.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:o.name})})]})},o.id))})})},$t=({config:t,sectionIndex:r})=>{const[l,s]=d.exports.useState(t.screeningItems.reduce((n,c)=>(n[c.items[0].screeningType]=c.items[0].params,n),{})),i=(n,c)=>{const u=JSON.parse(JSON.stringify(l));u[n]=c,s(u)};return a(x,{children:[e("div",{className:"flex gap-3 flex-wrap my-6",children:t.screeningItems.map((n,c)=>e("select",{className:"outline-none bg-dark-lighten px-3 py-2 rounded",value:l[n.items[0].screeningType],onChange:u=>i(n.items[0].screeningType,u.target.value),children:n.items.map(u=>e("option",{className:"outline-none bg-dark-lighten px-3 py-2",value:u.params,children:u.name},u.params))},`${c}`))}),e(Ct,{params:t.params,configs:l,sectionIndex:r})]})},Lt=()=>{const{data:t,error:r}=F("search-config",()=>Te()),[l,s]=d.exports.useState(0);return r?e(P,{}):a(x,{children:[e(E,{value:"Explore - MacChill"}),a("div",{className:"flex flex-col items-stretch min-h-screen mx-[7vw]",children:[e(H,{}),t?a("div",{className:"mb-6",children:[e("div",{className:"flex gap-3",children:t.map((i,n)=>e("button",{className:`transition relative after:absolute after:top-[110%] after:left-0 after:w-full after:h-[2px] after:bg-transparent after:rounded after:transition ${l===n?"text-primary after:bg-primary":""}`,onClick:()=>{s(n)},children:i.name},n))}),e($t,{config:t[l],sectionIndex:l})]}):e("div",{className:"flex-grow flex justify-center items-center",children:e("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})})]})]})},Ee=()=>{try{return JSON.parse(localStorage.getItem("filmhot-recent")||"[]")}catch{return[]}},It=()=>{const[t,r]=d.exports.useState(Ee());return a(x,{children:[e(E,{value:"Watch history - MacChill"}),a("div",{className:"flex flex-col items-stretch mx-[7vw] mb-8",children:[e(H,{}),a("div",{className:"flex justify-between mb-6",children:[e("h1",{className:"text-3xl",children:"Watch history"}),a("button",{onClick:()=>{localStorage.removeItem("filmhot-recent"),r(Ee())},className:"text-primary",children:[e("i",{className:"fas fa-trash"})," ",e("span",{children:"Clear"})]})]}),t.length===0?a("div",{className:"flex flex-col items-center my-10 gap-6",children:[e("img",{className:"w-40 h-40 object-cover",src:"/cinema.svg",alt:""}),e("p",{className:"text-xl",children:"No Watch history found"}),e(g,{className:"text-xl text-primary",to:"/",children:"Discover more"})]}):e("div",{className:"grid gap-6 grid-cols-sm md:grid-cols-lg",children:t.map(s=>e(g,{title:s.name,to:s.category===0?`/movie/${s.id}`:`/tv/${s.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:L(s.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:s.name})})]})},s.id))})]})]})},Rt=({images:t})=>e(ae,{className:"rounded-2xl overflow-hidden",modules:[ie],navigation:!0,loop:!0,slidesPerView:1,children:t.map(r=>e(ne,{children:e(g,{to:r.link,children:a("div",{className:"w-full h-0 pb-[42%] relative",children:[e(V.LazyLoadImage,{className:"absolute top-0 left-0 w-full h-full object-cover opacity-75",src:L(r.image,"900"),alt:"",effect:"opacity"}),e("h1",{className:"scale-100 absolute left-[7%] bottom-[10%] text-xl md:text-3xl max-w-[86%] whitespace-nowrap overflow-hidden text-ellipsis",children:r.title})]})})},r.image))}),Tt=({images:t,coverType:r})=>e(ae,{modules:[ie],navigation:!0,slidesPerView:"auto",slidesPerGroupAuto:!0,spaceBetween:30,children:t.map(l=>e(ne,{style:{width:W[r||1].width},children:e(g,{to:l.link,children:a("div",{className:"rounded-lg overflow-hidden bg-dark-lighten group",children:[e(V.LazyLoadImage,{style:{width:W[r||1].width,height:W[r||1].height},className:"group-hover:brightness-75 transition duration-300 object-cover",src:l.image,width:W[r||1].width,height:W[r||1].height,effect:"opacity",alt:""}),e("h1",{className:"group-hover:text-primary transition duration-300 pb-1 px-2 m-0 text-lg max-w-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.title})]})})},l.image))}),k=l=>{var s=l,{className:t}=s,r=re(s,["className"]);return e("div",q({className:`animate-pulse bg-gray-700 ${t}`},r))},Me=()=>e(ae,{modules:[ie],navigation:!0,slidesPerView:"auto",slidesPerGroupAuto:!0,spaceBetween:30,children:[...new Array(Math.ceil(window.innerWidth/200))].map((t,r)=>e(ne,{className:"!w-[175px]",children:e(k,{className:"w-[175px] h-[246px] rounded-xl"})},r))}),jt=async(t=0)=>(await $.get("homePage/getHome",{params:{page:t}})).data.data.recommendItems.filter(r=>!r.bannerProportion),Pt=async()=>(await $.get("search/v1/searchLeaderboard")).data.data.list,Ae=()=>{const{data:t,error:r}=F("home-top-searches",()=>Pt());return!t||r?e("div",{className:"flex flex-col gap-3",children:[...new Array(Math.round(window.innerHeight/100))].map((l,s)=>a("div",{className:"flex gap-2",children:[e(k,{className:"w-[100px] h-[60px] flex-shrink-0 rounded-lg"}),e(k,{className:"flex-grow h-4 rounded-md"})]},s))}):e("div",{className:"flex flex-col gap-3",children:t.map(l=>a(g,{to:l.domainType===0?`/movie/${l.id}`:`/tv/${l.id}`,className:"flex gap-2 hover:brightness-75 transition duration-300",children:[e("div",{className:"w-[100px] h-[60px] flex-shrink-0",children:e(V.LazyLoadImage,{className:"w-[100px] h-[60px] object-cover rounded-lg",src:L(l.cover,"100"),width:100,height:60,effect:"opacity",alt:""})}),e("div",{children:e("h1",{children:l.title})})]},l.id))})},Et=()=>{var u,m;const t=o=>`home-${o||0}`,{data:r,error:l,setSize:s}=G(t,o=>jt(Number(o.split("-").slice(-1)[0])),{revalidateFirstPage:!1}),[i,n]=d.exports.useState(!1),c=U();return d.exports.useEffect(()=>{n(!1)},[c]),a(x,{children:[e(E,{value:"MacChill - AdFree Movie / Anime Watching Website"}),a("div",{className:"flex sm:hidden justify-between px-[4vw] mt-6",children:[a(g,{to:"/",className:"flex items-center gap-2",children:[e("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),e("span",{className:"text-xl font-medium",children:"MacChill"})]}),e("button",{onClick:()=>n(!i),children:e("i",{className:"fas fa-bars text-2xl"})})]}),a("div",{className:"flex",children:[e(Pe,{sidebarActive:i,setSidebarActive:n}),e("div",{className:"flex-grow px-[4vw] md:px-8 pb-8 pt-0 overflow-hidden flex flex-col items-stretch",children:!r||l?a(x,{children:[e("div",{className:"relative h-0 pb-[42%] mt-8",children:e(k,{className:"absolute top-0 left-0 w-full h-full rounded-2xl"})}),[...new Array(2)].map((o,h)=>a(d.exports.Fragment,{children:[e(k,{className:"my-8 h-6 w-full max-w-[200px]"}),e("div",{className:"overflow-hidden",children:e(Me,{})})]},h))]}):e(Q,{dataLength:(r==null?void 0:r.length)||0,next:()=>s(o=>o+1),hasMore:!l&&((m=(u=r==null?void 0:r.slice(-1))==null?void 0:u[0])==null?void 0:m.length)!==0,loader:a(x,{children:[e(k,{className:"my-8 h-6 w-full max-w-[200px]"}),e("div",{className:"overflow-hidden",children:e(Me,{})})]}),children:r.reduce((o,h)=>[...o,...h],[]).map(o=>o.homeSectionType==="BANNER"&&o.recommendContentVOList[0].title!=""?e("div",{className:"overflow-hidden w-full mt-8",children:e(Rt,{images:o.recommendContentVOList.map(h=>{const b=new URLSearchParams(new URL(h.jumpAddress).search);return{title:h.title,image:h.imageUrl,link:b.get("type")==="0"?`/movie/${b.get("id")}`:`/tv/${b.get("id")}`}}).filter(h=>{if(h.title!=""&&h.link!="/tv/null")return h})||[]})},o.homeSectionId):a("div",{children:[e("h1",{className:"text-2xl mb-3 mt-8",children:o.homeSectionName.replace("on Loklok","")}),e(Tt,{images:o.recommendContentVOList.map(h=>{const b=new URLSearchParams(new URL(h.jumpAddress).search);return{title:h.title,image:L(h.imageUrl,"200"),link:b.get("type")==="0"?`/movie/${b.get("id")}`:`/tv/${b.get("id")}`}}).filter(h=>{if(h.title!=""&&h.link!="/tv/null")return h}),coverType:o.coverType})]},o.homeSectionId))})}),a("div",{className:"flex-shrink-0 w-[350px] p-8 sticky top-0 h-screen scrollbar overflow-hidden overflow-y-auto hidden md:block",children:[e(oe,{}),e("h1",{className:"text-xl my-6",children:"Top Searches"}),e(Ae,{})]})]})]})},Mt=(t,r)=>{const[l,s]=d.exports.useState(null),[i,n]=d.exports.useState(!Boolean(l)),[c,u]=d.exports.useState(!1);return d.exports.useEffect(()=>{const m=Qe(r,o=>{s(o),n(!1)},o=>{console.log(o),s(null),n(!1),u(!0)});return()=>{m()}},[t]),{loading:i,error:c,data:l}},At=({data:t,episodeIndex:r})=>{const l=X(v=>v.currentUser),s=U(),[i,n]=d.exports.useState(""),[c,u]=d.exports.useState(!1),o=`${typeof r=="undefined"?"movie":"tv"}-${t.id}`,[h,b]=d.exports.useState(10),I=async v=>{v.preventDefault(),i.trim()&&(u(!0),et(Le(me,o),{user:l,value:i.trim(),reactions:{},createdAt:tt()}).finally(()=>u(!1)),n(""))},M=async(v,w)=>{(l==null?void 0:l.uid)&&rt(lt(me,o,v),{[`reactions.${l==null?void 0:l.uid}`]:w})},{data:N,error:T,loading:A}=Mt(`${o}-${h}`,Ze(Le(me,o),Ye("createdAt","desc"),Xe(h)));return a("div",{children:[e("h1",{className:"text-2xl mt-10",children:"Comments"}),T?e("div",{className:"my-3",children:"Cannot load comments"}):a(x,{children:[l?a("form",{onSubmit:I,className:"relative border border-gray-600 rounded-full my-6",children:[e("img",{className:"w-[30px] h-[30px] rounded-full absolute top-1/2 -translate-y-1/2 left-[10px]",src:L(l.photoURL,"30","30"),alt:""}),e("input",{value:i,onChange:v=>n(v.target.value),onKeyDown:v=>v.stopPropagation(),onKeyUp:v=>v.stopPropagation(),onKeyPress:v=>v.stopPropagation(),className:"w-full h-12 bg-transparent outline-none text-white px-12",placeholder:"Comment what you think...",type:"text"}),c?e("div",{className:"absolute right-[14px] top-1/2 -translate-y-1/2",children:e("div",{className:"w-[25px] h-[25px] rounded-full border-white border-t-transparent border-[3px] animate-spin"})}):e("button",{className:"absolute right-[14px] top-1/2 -translate-y-1/2",type:"submit",children:e("i",{className:"fas fa-paper-plane text-xl"})})]}):a("div",{className:"flex items-center gap-3 h-12 border border-gray-600 rounded-full my-6 px-3",children:[e("img",{className:"w-[30px] h-[30px] rounded-full",src:"/avatar.png",alt:""}),a("p",{children:["You need to"," ",e(g,{className:"text-primary",to:`/sign-in?redirect=${encodeURIComponent(s.pathname)}`,children:"Sign in"})," ","to comment"]})]}),e("div",{className:"flex flex-col items-stretch gap-3",children:N==null?void 0:N.docs.map(v=>{var O,z,_;const w=v.data();return a("div",{className:"flex gap-2",children:[e("img",{className:"w-[50px] h-[50px] rounded-full",src:L(w.user.photoURL,"50","50"),alt:""}),a("div",{className:"flex flex-col items-stretch",children:[a("div",{className:"flex gap-2 items-end",children:[e("p",{className:"font-bold",children:w.user.displayName}),e("p",{className:"text-gray-400 text-sm",children:((O=w==null?void 0:w.createdAt)==null?void 0:O.seconds)?vt(w.createdAt.seconds*1e3):"Just now"})]}),e("p",{children:w.value}),a("div",{className:"flex gap-3 items-center",children:[a("button",{onClick:()=>{var S;return M(v.id,((S=Object.entries(w.reactions).find(R=>R[0]===(l==null?void 0:l.uid)))==null?void 0:S[1])===1?0:1)},className:`flex items-center gap-1 transition ${l?"hover:brightness-75":"cursor-default"} ${((z=Object.entries(w.reactions).find(S=>S[0]===(l==null?void 0:l.uid)))==null?void 0:z[1])===1?"text-primary":""}`,children:[e("i",{className:"fas fa-thumbs-up"}),e("span",{children:Object.values(w.reactions).filter(S=>S===1).length})]}),a("button",{onClick:()=>{var S;return M(v.id,((S=Object.entries(w.reactions).find(R=>R[0]===(l==null?void 0:l.uid)))==null?void 0:S[1])===2?0:2)},className:`flex items-center gap-1 transition ${l?"hover:brightness-75":"cursor-default"} ${((_=Object.entries(w.reactions).find(S=>S[0]===(l==null?void 0:l.uid)))==null?void 0:_[1])===2?"text-primary":""}`,children:[e("i",{className:"fas fa-thumbs-down"}),e("span",{children:Object.values(w.reactions).filter(S=>S===2).length})]})]})]})]},v.id)})}),!A&&!(N==null?void 0:N.size)&&e("p",{className:"text-center text-gray-400",children:"No one has commented"}),!A&&Boolean(N==null?void 0:N.size)&&(N==null?void 0:N.size)>=h&&e("div",{className:"flex justify-center mt-8",children:e("button",{onClick:()=>b(h+10),className:"bg-primary text-white px-4 py-2 rounded hover:brightness-[115%] transition",children:"Load more"})})]})]})},Ut=({playerKey:t,sources:r,subtitles:l})=>{var be;const[s,i]=d.exports.useState(0),[n,c]=d.exports.useState(Number(localStorage.getItem("filmhot-speed"))||1),[u,m]=d.exports.useState(!0),[o,h]=d.exports.useState(!1),[b,I]=d.exports.useState(!1),[M,N]=d.exports.useState(!1),[T,A]=d.exports.useState(0),[v,w]=d.exports.useState(0),[O,z]=d.exports.useState(0),[_,S]=d.exports.useState(!1),[R,ue]=d.exports.useState(isNaN(parseInt(localStorage.getItem("filmhot-volume")))?100:Number(localStorage.getItem("filmhot-volume"))),[Ve,fe]=d.exports.useState(!0),y=d.exports.useRef(null),Y=d.exports.useRef(null),ee=d.exports.useRef(null),K=d.exports.useRef(!1),B=d.exports.useRef(null),pe=d.exports.useRef(null),ge=d.exports.useRef(null),D=f=>{y.current&&(y.current.currentTime+=f)},Oe=()=>{ue(f=>f===0?100:0)},xe=f=>{if(!y.current||!ee.current)return;const p=(f.clientX-f.target.getBoundingClientRect().left)/ee.current.offsetWidth,C=(Math.abs(p)===1/0||isNaN(p)?0:p)*y.current.duration;y.current.currentTime=C,w(C)},ve=f=>{M?N(!1):m(p=>!p),f.detail===2&&h(p=>!p)};return d.exports.useEffect(()=>{var f,p;u?(f=y.current)==null||f.pause():(p=y.current)==null||p.play()},[u]),d.exports.useEffect(()=>{y.current&&(y.current.volume=R/100),localStorage.setItem("filmhot-volume",String(R))},[R]),d.exports.useEffect(()=>{Z.on("change",()=>{Z.isFullscreen?h(!0):h(!1)})},[]),d.exports.useEffect(()=>{let f=Y.current;o?Z.request(f):Z.exit()},[o]),d.exports.useEffect(()=>{!y.current||(y.current.currentTime=v)},[s]),d.exports.useEffect(()=>{!y.current||(localStorage.setItem("filmhot-speed",String(n)),y.current.playbackRate=n)},[n]),d.exports.useEffect(()=>{const f=C=>{var ye,Ne,we,Se;((ye=Y.current)==null?void 0:ye.contains(document.activeElement))&&((Ne=document.activeElement)==null||Ne.blur()),C.keyCode===32&&((we=ge.current)==null||we.click()),C.keyCode===37&&D(-10),C.keyCode===39&&D(10),C.keyCode===70&&((Se=pe.current)==null||Se.click())},p=C=>{C.keyCode===32&&C.preventDefault()};return window.addEventListener("keyup",f),window.addEventListener("keydown",p),()=>{window.removeEventListener("keyup",f),window.removeEventListener("keydown",p)}},[]),e("div",{className:"relative w-full h-0 pb-[56.25%]",children:a("div",{onMouseMove:()=>{B.current&&clearTimeout(B.current),fe(!0),B.current=setTimeout(()=>{fe(!1),N(!1)},2e3)},onMouseLeave:()=>N(!1),ref:Y,className:"absolute top-0 left-0 w-full h-full flex justify-center items-center group bg-black",children:[e(se,{crossOrigin:"",playsInline:!0,onClickCapture:ve,className:"w-full h-full cursor-pointer",controls:!1,autoPlay:!1,playerRef:y,src:r[s].url,onWaiting:()=>I(!0),onPlaying:()=>I(!1),onLoadedData:()=>{var p;S(!0),z(((p=y.current)==null?void 0:p.duration)||0);const f=Number(localStorage.getItem(`${t}-time`));w(f),y.current&&(y.current.currentTime=f)},onTimeUpdate:()=>{var f,p,C;localStorage.setItem(`${t}-time`,String(((f=y.current)==null?void 0:f.currentTime)||0)),w(((p=y.current)==null?void 0:p.currentTime)||0),z(((C=y.current)==null?void 0:C.duration)||0)},children:T>=0&&_&&e("track",{kind:"subtitles",srcLang:"sub",label:"Subtitle",src:Ie((be=l[T])==null?void 0:be.url),default:!0})}),b&&!u&&e("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 cursor-pointer",children:e("div",{className:"border-white border-4 border-r-transparent w-12 h-12 rounded-full animate-spin"})}),u&&e("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 cursor-pointer",onClickCapture:ve,children:e("img",{className:"w-[50px] h-[50px]",src:"/play.svg",alt:""})}),a("div",{className:`absolute bottom-0 left-0 w-full h-16 bg-gradient-to-b from-transparent to-[#000000e0] flex flex-col items-stretch text-xl transition duration-300 opacity-0 ${u?"!opacity-100":""} ${Ve?"group-hover:opacity-100":""}`,children:[e("div",{ref:ee,onMouseDown:f=>{K.current=!0,xe(f)},onMouseMove:f=>{K.current&&xe(f)},onMouseUp:()=>K.current=!1,onMouseLeave:()=>K.current=!1,className:"flex-shrink-0 h-[12px] w-full cursor-pointer flex flex-col items-stretch justify-center seek-container",children:e("div",{className:"h-[4px] bg-[#FFFFFF80]",children:e("div",{style:{width:O!==0?`${Math.round(v/O*1e3)/10}%`:0},className:"h-full bg-white relative after:absolute after:w-[12px] after:h-[12px] after:right-[-6px] after:bg-white after:top-1/2 after:-translate-y-1/2 after:rounded-full after:opacity-0 seek-ball after:transition"})})}),a("div",{className:"flex justify-between items-stretch flex-grow px-4",children:[a("div",{className:"flex items-center gap-4",children:[e("button",{ref:ge,className:"before:left-[46px]","data-tooltips":u?"Play (space)":"Pause (space)",onClickCapture:()=>m(f=>!f),children:e("img",{className:"w-[20px] h-[20px]",src:u?"/play.svg":"/pause.svg",alt:""})}),e("button",{"data-tooltips":"Rewind 10s",onClickCapture:()=>D(-10),children:e("i",{className:"fas fa-step-backward"})}),e("button",{"data-tooltips":"Forward 10s",onClickCapture:()=>D(10),children:e("i",{className:"fas fa-step-forward"})}),a("div",{className:"flex items-stretch volume-container",children:[e("button",{"data-tooltips":"Volume",onClickCapture:Oe,children:e("i",{className:`fas fa-volume-${R===100?"up":R===0?"mute":"down"}`})}),e("div",{className:"w-0 transition-all duration-300 overflow-hidden flex items-center justify-end volume",children:e("input",{className:"slider w-[100px]",type:"range",min:0,max:100,value:R,onChange:f=>ue(+f.target.value)})})]}),a("div",{className:"text-base hidden sm:block",children:[e("span",{children:Re(v)}),e("span",{children:" / "}),e("span",{children:Re(O)})]})]}),a("div",{className:"flex gap-4 items-center",children:[e("button",{"data-tooltips":T>=0?"Disable subtitle":"Enable subtitle",onClickCapture:()=>T>=0?A(-1):A(0),children:e("i",{className:`${T>=0?"fas":"far"} fa-closed-captioning`})}),a("div",{className:"relative",children:[e("button",{onClickCapture:()=>N(f=>!f),"data-tooltips":"Settings",children:e("i",{className:"fas fa-cog"})}),a("div",{onMouseMove:f=>{f.stopPropagation(),clearTimeout(B.current)},className:`absolute bottom-[40px] right-[-40px] w-[200px] h-[200px] overflow-y-auto overflow-x-hidden bg-dark-lighten p-4 invisible opacity-0 transition ${M?"!opacity-100 !visible":""}`,children:[e("h1",{className:"text-lg",children:"Quality"}),e("div",{className:"flex flex-col items-stretch pl-[6px]",children:r.map((f,p)=>e("div",{children:a("button",{onClickCapture:()=>{i(p),m(!0)},className:`text-sm relative text-gray-400 ${s===p?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:[f.quality,"p"]})},f.quality))}),e("h1",{className:"text-lg mt-4",children:"Subtitle"}),a("div",{className:"flex flex-col items-stretch pl-[6px]",children:[e("div",{children:e("button",{onClickCapture:()=>A(-1),className:`text-sm relative text-gray-400 text-left ${T===-1?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:"Off"})}),l.map((f,p)=>e("div",{children:e("button",{onClickCapture:()=>A(p),className:`text-sm relative text-gray-400 text-left ${T===p?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:f.language})},p))]}),e("h1",{className:"text-lg mt-4",children:"Speed"}),e("div",{className:"flex flex-col items-stretch pl-[6px]",children:[...new Array(8)].map((f,p)=>e("div",{children:a("button",{onClickCapture:()=>c((p+1)/4),className:`text-sm relative text-gray-400 ${n===(p+1)/4?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:[(p+1)/4,"x"]})},p))})]})]}),e("button",{ref:pe,className:"before:right-[-14px] before:left-auto before:translate-x-0","data-tooltips":`${o?"Exit (f)":"Fullscreen (f)"}`,onClickCapture:()=>h(f=>!f),children:o?e("i",{className:"fas fa-compress-alt"}):e("i",{className:"fas fa-expand-alt"})})]})]})]})]})})},Vt=({data:t,episodeIndex:r})=>{var l;return e(x,{children:t?a("div",{className:"flex flex-col gap-[10px]",children:[e("h1",{className:"text-3xl mt-5",children:t==null?void 0:t.name}),a("div",{className:"flex gap-4",children:[a("div",{className:"flex items-center gap-1",children:[e("img",{className:"w-4 h-4",src:"/star.png",alt:""}),e("p",{children:(l=t==null?void 0:t.score)==null?void 0:l.toFixed(1)})]}),a("div",{className:"flex items-center gap-1",children:[e("img",{className:"w-4 h-4",src:"/calendar.png",alt:""}),e("p",{children:t==null?void 0:t.year})]})]}),e("div",{className:"flex gap-3 flex-wrap",children:t.tagList.map(s=>e(g,{to:`/category/${s.id}`,className:"bg-dark-lighten rounded-full px-3 py-1 hover:brightness-125 transition duration-300",children:s.name},s.id))}),e("p",{children:t.introduction}),t.episodeVo.length>1&&a(x,{children:[e("h1",{className:"text-xl my-3",children:"Episodes"}),e("div",{className:"flex max-w-[92vw] md:max-w-[calc(88vw-300px)] gap-3 overflow-auto",children:t.episodeVo.map((s,i)=>e(g,{to:`/tv/${t.id}?episode=${i}`,className:`px-4 py-[8px] bg-dark-lighten rounded hover:brightness-125 transition duration-300 ${i===r?"!bg-primary text-white":""}`,children:i+1},i))})]})]}):a(x,{children:[e(k,{className:"w-[70%] h-8 mt-6"}),e(k,{className:"w-[60%] h-8 mt-6"})]})})},Ot=({playerKey:t,sources:r,subtitles:l})=>{const s=d.exports.useRef(null),[i,n]=d.exports.useState(!1);return e("div",{className:"relative w-full h-0 pb-[56.25%]",children:e("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center group bg-black",children:e(se,{crossOrigin:"",playsInline:!0,controls:!0,autoPlay:!1,playerRef:s,src:r[0].url,className:"w-full h-full",onLoadedData:()=>{n(!0);const c=Number(localStorage.getItem(`${t}-time`));s.current&&(s.current.currentTime=c)},onTimeUpdate:()=>{var c;localStorage.setItem(`${t}-time`,String(((c=s.current)==null?void 0:c.currentTime)||0))},children:i&&l.map((c,u)=>e("track",{kind:"subtitles",srcLang:c.lang,label:c.language,src:Ie(c.url),default:u===0}))})})})},Ft=({data:t})=>e("div",{className:"flex-shrink-0 md:w-[300px]",children:t?a(x,{children:[(t==null?void 0:t.refList)&&t.refList.filter(r=>r.id!==t.id).length>0&&a(x,{children:[e("h1",{className:"text-2xl my-3",children:"In the series"}),e("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2",children:t==null?void 0:t.refList.filter(r=>r.id!==t.id).map(r=>a(g,{to:`/${r.category===0?"movie":"tv"}/${r.id}`,className:"flex gap-3 pr-2 hover:brightness-[85%] transition duration-300",children:[e("div",{className:"flex-shrink-0 h-[100px] w-[70px]",children:e(ce,{className:"h-full w-full object-cover",src:L(r.coverVerticalUrl,"","100"),alt:""})}),e("div",{className:"my-2 flex-grow",children:e("p",{children:r.name})})]},r.id))})]}),(t==null?void 0:t.likeList)&&t.likeList.length>0&&a(x,{children:[e("h1",{className:"text-2xl my-3",children:"Similar to this"}),e("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2",children:t==null?void 0:t.likeList.map(r=>{var l;return a(g,{to:`/${r.category===0?"movie":"tv"}/${r.id}`,className:"flex gap-3 pr-2 hover:brightness-[85%] transition duration-300",children:[e("div",{className:"flex-shrink-0 h-[100px] w-[70px]",children:e(ce,{className:"h-full w-full object-cover",src:L(r.coverVerticalUrl,"","100"),alt:""})}),a("div",{className:"my-2 flex-grow",children:[e("p",{children:r.name}),a("div",{className:"flex items-center gap-2",children:[e("img",{className:"w-4 h-4",src:"/star.png",alt:""}),e("p",{children:(l=r.score)==null?void 0:l.toFixed(1)})]})]})]},r.id)})})]})]}):e(x,{children:[...new Array(2)].map((r,l)=>a("div",{children:[e(k,{className:"w-[60%] h-7 my-6"}),e("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col gap-3",children:[...new Array(10)].map((s,i)=>a("div",{className:"flex gap-3 pr-2",children:[e(k,{className:"h-[100px] w-[70px] flex-shrink-0"}),a("div",{className:"flex-grow",children:[e(k,{className:"w-full h-4"}),e(k,{className:"w-[70%] h-4 mt-3"})]})]},i))},l)]},l))})}),Ue=({data:t,sources:r,subtitles:l,episodeIndex:s})=>{const n=`${typeof s=="undefined"?"movie":"tv"}-${t==null?void 0:t.id}${s?`-${s}`:""}`;return d.exports.useEffect(()=>{if(!t)return;let c=JSON.parse(localStorage.getItem("filmhot-recent")||"[]");!Array.isArray(c)||(c=c.filter(u=>u.id!==t.id),c.unshift({id:t.id,category:t.category,coverVerticalUrl:t.coverVerticalUrl,name:t.name}),localStorage.setItem("filmhot-recent",JSON.stringify(c)))},[t]),a(x,{children:[t&&e(E,{value:`Watch ${t.name}${typeof s!="undefined"?` - Episode ${s+1}`:""} - MacChill`}),e("div",{className:"flex justify-center",children:a("div",{className:"mx-[4vw] lg:mx-[6vw] flex-1",children:[e(H,{}),a("div",{className:"flex flex-col md:flex-row gap-10 my-7",children:[a("div",{className:"flex flex-col items-stretch flex-grow",children:[e("div",{className:"w-full",children:t&&r&&l?e(x,{children:gt()?e(Ot,{playerKey:n,sources:r,subtitles:l}):e(Ut,{playerKey:n,sources:r,subtitles:l})}):e("div",{className:"w-full h-0 pb-[56.25%] relative",children:e(k,{className:"absolute top-0 left-0 w-full h-full"})})},s),e(Vt,{data:t,episodeIndex:s}),t&&e(At,{data:t,episodeIndex:s})]}),e(Ft,{data:t})]})]})})]})},zt=async t=>{const r=(await $.get("movieDrama/get",{params:{id:t,category:0}})).data.data,l=(await Promise.all(r.episodeVo[0].definitionList.map(async i=>(await $.get("media/previewInfo",{params:{category:0,contentId:t,episodeId:r.episodeVo[0].id,definition:i.code}})).data.data.mediaUrl))).map((i,n)=>({quality:Number(r.episodeVo[0].definitionList[n].description.toLowerCase().replace("p","")),url:i})).sort((i,n)=>n.quality-i.quality),s=r.episodeVo[0].subtitlingList.map(i=>({language:`${i.language}${i.translateType?" (Auto)":""}`,url:i.subtitlingUrl,lang:i.languageAbbr})).reduce((i,n)=>n.lang==="en"?[n,...i]:[...i,n],[]).reduce((i,n)=>n.lang==="vi"?[n,...i]:[...i,n],[]);return{data:r,sources:l,subtitles:s}},qt=()=>{const{id:t}=le(),{data:r,error:l}=F(`movie-${t}`,()=>zt(t));return l?e(P,{}):e(Ue,{data:r==null?void 0:r.data,sources:r==null?void 0:r.sources,subtitles:r==null?void 0:r.subtitles})},Wt=({query:t})=>{const{data:r,error:l}=F(`search-${t}`,()=>yt(t));return l?e(P,{}):e("div",{className:"grid gap-6 grid-cols-sm md:grid-cols-lg",children:r?r.length===0?e("div",{children:"No result found"}):e(x,{children:r.map(s=>e(g,{title:s.name,to:s.domainType===0?`/movie/${s.id}`:`/tv/${s.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:L(s.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:s.name})})]})},s.id))}):e(x,{children:[...new Array(20)].map((s,i)=>e("div",{className:"relative h-0 pb-[163%]",children:e(k,{className:"absolute top-0 left-0 w-full h-full rounded"})},i))})})},he=()=>{const t=U();return new URLSearchParams(t.search)},Ht=()=>{const r=he().get("q");return(r==null?void 0:r.trim())?a(x,{children:[e(E,{value:`Search for ${r} - MacChill`}),a("div",{className:"flex flex-col items-stretch mx-[7vw] mb-8",children:[e(H,{}),e("div",{children:a("h1",{className:"mb-6 text-3xl",children:["Search result for ",r]})}),e(Wt,{query:r})]})]}):a(x,{children:[e(E,{value:"Search - MacChill"}),e("div",{className:"flex justify-center my-[100px] mx-6",children:a("div",{className:"w-full max-w-[400px] flex flex-col items-center gap-4",children:[a("div",{className:"flex flex-col items-stretch gap-3",children:[e("h1",{className:"text-2xl",children:"Search for your favorite movies"}),e(oe,{autoFocus:!0})]}),a("div",{className:"mt-8 w-full",children:[e("h1",{className:"text-lg mb-3",children:"Popular Searches"}),e(Ae,{})]})]})})]})},_t=()=>{const t=X(u=>u.currentUser),r=he(),[l,s]=d.exports.useState(!1),[i,n]=d.exports.useState(""),c=u=>{s(!0),nt(de,u).then(m=>{console.log(m.user)}).catch(m=>{n(`Error: ${m.code}`)}).finally(()=>{s(!1)})};return t?e(st,{to:r.get("redirect")||"/"}):a(x,{children:[e(E,{value:"Sign In - MacChill"}),e("div",{className:"min-h-screen w-screen bg-[url('/bg.png')] bg-no-repeat bg-cover bg-center",children:e("div",{className:"w-full min-h-screen flex justify-center items-center bg-[#00000056]",children:a("div",{className:"w-[90vw] max-w-[350px] bg-black p-10 flex flex-col items-center gap-6 rounded-xl",children:[e("h1",{className:"text-3xl font-semibold",children:"Sign In"}),i&&e("div",{className:"p-3 bg-red-200 text-red-600 border border-red-400 w-full rounded",children:i}),a("button",{disabled:l,onClick:()=>c(new at),className:"flex items-center bg-white text-black p-3 gap-3 rounded-md cursor-pointer hover:brightness-90 disabled:!brightness-75 disabled:!cursor-default transition duration-300 w-full",children:[e("img",{className:"w-6 h-6",src:"/google.svg",alt:""}),e("span",{children:"Sign In With Google"})]}),a("button",{disabled:l,onClick:()=>c(new it),className:"flex items-center bg-primary text-white p-3 gap-3 rounded-md cursor-pointer hover:brightness-90 disabled:!brightness-75 disabled:!cursor-default transition duration-300 w-full",children:[e("img",{className:"w-6 h-6",src:"/facebook.svg",alt:""}),e("span",{children:"Sign In With Facebook"})]})]})})})]})},Kt=async(t,r)=>{const l=(await $.get("movieDrama/get",{params:{id:t,category:1}})).data.data,s=(await Promise.all(l.episodeVo[r].definitionList.map(async n=>(await $.get("media/previewInfo",{params:{category:1,contentId:t,episodeId:l.episodeVo[r].id,definition:n.code}})).data.data.mediaUrl))).map((n,c)=>({quality:Number(l.episodeVo[r].definitionList[c].description.toLowerCase().replace("p","")),url:n})).sort((n,c)=>c.quality-n.quality),i=l.episodeVo[r].subtitlingList.map(n=>({language:`${n.language}${n.translateType?" (Auto)":""}`,url:n.subtitlingUrl,lang:n.languageAbbr})).reduce((n,c)=>c.lang==="en"?[c,...n]:[...n,c],[]).reduce((n,c)=>c.lang==="vi"?[c,...n]:[...n,c],[]);return{data:l,sources:s,subtitles:i}},Bt=()=>{const{id:t}=le(),r=he(),l=Number(r.get("episode"))||0,{data:s,error:i}=F(`tv-${t}-${l}`,()=>Kt(t,l));return i?e(P,{}):e(Ue,{data:s==null?void 0:s.data,sources:s==null?void 0:s.sources,subtitles:s==null?void 0:s.subtitles,episodeIndex:l})},Dt=()=>{const t=X(l=>l.setCurrentUser),r=U();return d.exports.useEffect(()=>{ot(de,l=>{t(l?{uid:l.uid,email:l.email,photoURL:l.photoURL,displayName:l.displayName}:null)})},[]),d.exports.useEffect(()=>{window.scrollTo(0,0)},[r.pathname,r.search]),a(ct,{children:[e(j,{index:!0,element:e(Et,{})}),e(j,{path:"movie/:id",element:e(qt,{})}),e(j,{path:"tv/:id",element:e(Bt,{})}),e(j,{path:"search",element:e(Ht,{})}),e(j,{path:"explore",element:e(Lt,{})}),e(j,{path:"sign-in",element:e(_t,{})}),e(j,{path:"history",element:e(It,{})}),e(j,{path:"category/:id",element:e(wt,{})}),e(j,{path:"discovery",element:e(kt,{})})]})};dt.render(e(mt,{children:e(ht,{value:{revalidateOnFocus:!1,shouldRetryOnError:!1},children:e(Dt,{})})}),document.getElementById("root"));
